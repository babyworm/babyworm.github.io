---
title: MediaWiki 삽질기
author: babyworm
type: post
date: 2008-12-17T23:55:36+00:00
categories:
  - 개인적인
tags:
  - mediawiki
  - Mysql 에러
  - PHP 설정

---
사내에서 정보 공유차원에서 만들어놨던 Mediawiki 서버(라고 불리는 PC)가 4년간의 긴 생을 마감하고 장렬히 배를 째셨다. 급거 새로운 서버(역시 PC.. 회사에 남는 놈들 중에서 참한 거 하나 골라서..)를 하나 만들어 이전 작업..서버야 예전부터 만져봐 왔던 것이라 큰 부담없이 시작했는데, 예상외의 삽질 몇 가지. 또 삽질할 때를 대비하여 적습니다. 

1. 계정명이 한글인 경우 깨진다. 

원래 DB가 utf-8로 운영되고 있던거라 mysqldump 에서 utf8로 잡았고, 받는 서버도 utf-8로 설정해도 소용 없었음. 포기. 내용이 살아 있다는 데 만족하다. 

2. MySQL 1054 에러 발생하면서 첨부 파일이 있는 문서에 접근 할 수 없다. 

PERIC.COM 님의 블로그에서 [답][1]을 얻음. sql 테이블의 형태를 변경시켜주어서 해결 

3. 멀쩡히 로그인 잘 되던 wiki가 어느날 갑자기 로그인이 안된다. 

가장 고생한 부분. 꼬박 3시간 삽질했음.. (아.. 고급인력(?)이 이런 것에 3시간이나 허비하다니..) 

처음엔 Common.js 나 Common.css를 잘못 설정한 것이나, extension 설치 실수, 혹은 mysql db가 꼬였을 것으로 예상(공교롭게 이런 작업 한 다음날부터 로그인이 안되어서..)했으나, 실제로는 php.ini의 설정에 따라 MediaWiki 의 로그인이 영향을 받을 수 있다는 점을 발견 

새 서버에 공간도 넉넉하고 해서 그냥 php.ini에서 post\_max\_size 변수를 integer로 잡았는데, mediawiki의 로그인 부분에서 post\_max\_size가 너무 크게 설정되면 로그인이 안된다는 mediawiki 사용자 포럼의 글을 발견하고, 수정…. 다 잘됨.. orz 

그것도 모르고, mysql 에서 mw_user table을 헤집고 다녔다..mysql 쿼리를 직접 콘솔에서 다루기는 거의 7년 만인듯.. 

예전에 운용하던 것이 큰 문제가 없고, 외부에서 접근하지 못하도록 막아둔 설정이라 귀찮아서 업데이트도 안하고 몇몇 분들이 extension깔아달라고 해도 안 깔았는데, 이번에 대거 업데이트 및 extension 설치 중입니다. 

이제 viewvc 설치하고, mantis만 복구하면 끝인데, mantis는 복구하지 말고 그냥 wiki로 대치할까 생각 중이다. 상대적으로 mantis의 사용빈도가 급감해서.. 

그나저나, 역시 삽질을 해야 내공이 쌓이는지 덕분에 mediawiki의 운용 방법을 아주 약간 더 알게 되었습니다.

 [1]: http://reric.com/wp/2008/01/15/625
